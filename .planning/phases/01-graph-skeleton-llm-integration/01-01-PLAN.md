---
phase: 01-graph-skeleton-llm-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - uv.lock
  - .python-version
  - .gitignore
  - .env.example
  - src/editorial_ai/__init__.py
  - src/editorial_ai/config.py
  - tests/__init__.py
  - tests/conftest.py
autonomous: true
user_setup:
  - service: google-genai
    why: "Gemini LLM calls (Developer API free tier for local dev)"
    env_vars:
      - name: GOOGLE_API_KEY
        source: "Google AI Studio (https://aistudio.google.com/apikey) -> Create API Key"
  - service: langsmith
    why: "LLM tracing and observability"
    env_vars:
      - name: LANGSMITH_API_KEY
        source: "LangSmith (https://smith.langchain.com) -> Settings -> API Keys -> Create"

must_haves:
  truths:
    - "uv sync 실행 시 모든 의존성이 에러 없이 설치된다"
    - "from editorial_ai.config import settings가 import 가능하다"
    - "settings 객체가 .env 파일에서 환경변수를 로드한다"
  artifacts:
    - path: "pyproject.toml"
      provides: "프로젝트 메타데이터 및 의존성 정의"
      contains: "langgraph"
    - path: "src/editorial_ai/config.py"
      provides: "pydantic-settings 기반 환경변수 설정"
      exports: ["settings", "Settings"]
    - path: ".env.example"
      provides: "환경변수 템플릿"
      contains: "GOOGLE_API_KEY"
  key_links:
    - from: "src/editorial_ai/config.py"
      to: ".env"
      via: "pydantic-settings env_file"
      pattern: 'env_file.*=.*".env"'
---

<objective>
Python 프로젝트를 uv로 scaffold하고, 핵심 의존성을 설치하며, pydantic-settings 기반 환경변수 설정 모듈을 구축한다.

Purpose: 모든 후속 Plan의 기반이 되는 프로젝트 구조와 의존성 환경을 확립한다.
Output: uv로 관리되는 Python 프로젝트, src/editorial_ai/ 패키지 구조, pydantic-settings 설정 모듈
</objective>

<execution_context>
@/Users/kiyeol/.claude-pers/get-shit-done/workflows/execute-plan.md
@/Users/kiyeol/.claude-pers/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-graph-skeleton-llm-integration/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Python project scaffold with uv</name>
  <files>pyproject.toml, uv.lock, .python-version, .gitignore, src/editorial_ai/__init__.py, tests/__init__.py, tests/conftest.py</files>
  <action>
    uv를 사용하여 Python 프로젝트를 초기화하고 의존성을 설치한다.

    1. 프로젝트 초기화 (이미 git repo이므로 기존 디렉토리에서 init):
       - `uv init --lib --python 3.12` 실행하여 pyproject.toml 생성
       - pyproject.toml의 name을 `editorial-ai-worker`로, 패키지명을 `editorial_ai`로 설정
       - src layout 사용: `src/editorial_ai/`

    2. 코어 의존성 추가:
       ```
       uv add langgraph "langchain-google-genai>=4.2.1" pydantic "pydantic-settings>=2.8.0" python-dotenv langsmith
       ```

    3. 개발 의존성 추가:
       ```
       uv add --dev ruff "mypy>=1.14.0" "pytest>=8.3.0" "pytest-asyncio>=0.25.0"
       ```

    4. pyproject.toml에 tool 설정 추가:
       - [tool.ruff]: line-length = 100, target-version = "py312"
       - [tool.ruff.lint]: select = ["E", "F", "I", "UP"]
       - [tool.mypy]: python_version = "3.12", strict = true, plugins = ["pydantic.mypy"]
       - [tool.pytest.ini_options]: testpaths = ["tests"], asyncio_mode = "auto"

    5. .gitignore 업데이트: .env, __pycache__, .mypy_cache, .pytest_cache, .ruff_cache, dist/, *.egg-info 추가 (기존 내용 유지)

    6. tests/conftest.py 생성: 빈 conftest (향후 fixture 추가 예정)

    7. src/editorial_ai/__init__.py: `"""Editorial AI Worker - Multi-agent editorial content pipeline."""` docstring만

    주의사항:
    - `langchain-google-vertexai` 패키지를 절대 설치하지 않는다 (deprecated, 2026.06 지원 중단)
    - uv.lock 파일은 git에 커밋한다 (결정적 빌드 보장)
  </action>
  <verify>
    - `uv sync` 실행 시 에러 없음
    - `uv run python -c "import langgraph; import langchain_google_genai; import pydantic_settings; print('OK')"` 출력 "OK"
    - `uv run ruff check src/` 에러 없음
  </verify>
  <done>pyproject.toml에 모든 코어/dev 의존성이 선언되고, uv sync로 설치 가능하며, src/editorial_ai/ 패키지가 import 가능하다</done>
</task>

<task type="auto">
  <name>Task 2: Environment config with pydantic-settings</name>
  <files>src/editorial_ai/config.py, .env.example</files>
  <action>
    pydantic-settings 기반 환경변수 설정 모듈을 구축한다.

    1. src/editorial_ai/config.py 생성:
       ```python
       from pydantic_settings import BaseSettings
       from pydantic import Field
       from typing import Optional

       class Settings(BaseSettings):
           """애플리케이션 설정. .env 파일 또는 환경변수에서 로드."""

           # LLM Provider
           google_api_key: Optional[str] = Field(default=None, alias="GOOGLE_API_KEY")
           gcp_project_id: Optional[str] = Field(default=None, alias="GOOGLE_CLOUD_PROJECT")
           gcp_location: str = Field(default="us-central1", alias="GOOGLE_CLOUD_LOCATION")
           google_genai_use_vertexai: Optional[bool] = Field(
               default=None, alias="GOOGLE_GENAI_USE_VERTEXAI"
           )
           default_model: str = "gemini-2.5-flash"

           # LangSmith
           langsmith_tracing: bool = Field(default=False, alias="LANGSMITH_TRACING")
           langsmith_api_key: Optional[str] = Field(default=None, alias="LANGSMITH_API_KEY")
           langsmith_project: str = Field(
               default="editorial-ai-worker", alias="LANGSMITH_PROJECT"
           )

           model_config = {"env_file": ".env", "env_file_encoding": "utf-8", "populate_by_name": True}

       settings = Settings()
       ```

    2. .env.example 생성:
       ```
       # === LLM Provider ===
       # Option A: Gemini Developer API (무료 티어, 로컬 개발용)
       GOOGLE_API_KEY=your-google-api-key

       # Option B: Vertex AI (프로덕션, Google AI Ultra 크레딧 활용)
       # GOOGLE_GENAI_USE_VERTEXAI=true
       # GOOGLE_CLOUD_PROJECT=your-gcp-project-id
       # GOOGLE_CLOUD_LOCATION=us-central1

       # === LangSmith Tracing ===
       LANGSMITH_TRACING=true
       LANGSMITH_API_KEY=your-langsmith-api-key
       LANGSMITH_PROJECT=editorial-ai-worker
       ```

    주의사항:
    - `populate_by_name=True` 설정하여 alias와 field name 모두 사용 가능하게
    - .env 파일 자체는 .gitignore에 포함되어 커밋되지 않음
    - .env.example만 커밋하여 팀 공유
  </action>
  <verify>
    - `uv run python -c "from editorial_ai.config import settings; print(settings.default_model)"` 출력 "gemini-2.5-flash"
    - `uv run python -c "from editorial_ai.config import Settings; s = Settings(GOOGLE_API_KEY='test'); print(s.google_api_key)"` 출력 "test"
    - .env.example 파일 존재 확인
  </verify>
  <done>Settings 클래스가 .env 파일과 환경변수에서 설정을 로드하고, 기본값이 올바르게 적용되며, .env.example이 모든 설정 항목을 문서화한다</done>
</task>

</tasks>

<verification>
```bash
# 1. 의존성 설치 확인
uv sync

# 2. 핵심 import 확인
uv run python -c "
import langgraph
import langchain_google_genai
import pydantic_settings
from editorial_ai.config import settings
print(f'Model: {settings.default_model}')
print(f'LangSmith: {settings.langsmith_project}')
print('All imports OK')
"

# 3. 린트 통과
uv run ruff check src/ tests/

# 4. deprecated 패키지 미설치 확인
uv run python -c "
try:
    import langchain_google_vertexai
    print('ERROR: deprecated package installed!')
    exit(1)
except ImportError:
    print('OK: langchain-google-vertexai not installed')
"
```
</verification>

<success_criteria>
1. `uv sync` 에러 없이 완료
2. langgraph, langchain-google-genai, pydantic-settings import 성공
3. Settings 객체가 기본값으로 생성 가능
4. ruff check 통과
5. langchain-google-vertexai 미설치 확인
</success_criteria>

<output>
After completion, create `.planning/phases/01-graph-skeleton-llm-integration/01-01-SUMMARY.md`
</output>
