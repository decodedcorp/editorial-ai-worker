---
phase: 11-magazine-renderer-enhancement
plan: 03
type: execute
wave: 2
depends_on: ["11-02"]
files_modified:
  - admin/src/components/blocks/hero-block.tsx
  - admin/src/components/blocks/product-showcase-block.tsx
  - admin/src/components/blocks/celeb-feature-block.tsx
  - admin/src/components/blocks/image-gallery-block.tsx
  - admin/src/components/blocks/body-text-block.tsx
  - admin/src/components/blocks/headline-block.tsx
  - admin/src/components/blocks/pull-quote-block.tsx
  - admin/src/components/blocks/divider-block.tsx
  - admin/src/components/blocks/hashtag-bar-block.tsx
  - admin/src/components/blocks/credits-block.tsx
  - admin/src/app/layout.tsx
  - admin/src/lib/types.ts
autonomous: true

must_haves:
  truths:
    - "hero block renders real image via MagazineImage with dynamic aspect ratio from design spec"
    - "product_showcase block renders product images via MagazineImage with fallback"
    - "celeb_feature block renders celeb photos via MagazineImage with fallback"
    - "image_gallery block renders gallery images via MagazineImage with fallback"
    - "body_text block has magazine typography: serif font, drop cap on first paragraph, line-height 1.8"
    - "headline block uses design spec headline font (serif by default)"
    - "Google Fonts (Playfair Display, Noto Serif KR, Gothic A1, Noto Sans KR) loaded in layout.tsx"
    - "DesignSpec TypeScript interface added to types.ts"
  artifacts:
    - path: "admin/src/components/blocks/hero-block.tsx"
      provides: "Hero block with real image rendering"
      contains: "MagazineImage"
    - path: "admin/src/components/blocks/product-showcase-block.tsx"
      provides: "Product showcase with real product images"
      contains: "MagazineImage"
    - path: "admin/src/components/blocks/celeb-feature-block.tsx"
      provides: "Celeb feature with real celeb photos"
      contains: "MagazineImage"
    - path: "admin/src/components/blocks/image-gallery-block.tsx"
      provides: "Image gallery with real images"
      contains: "MagazineImage"
    - path: "admin/src/components/blocks/body-text-block.tsx"
      provides: "Body text with magazine typography and drop cap"
      contains: "drop-cap"
    - path: "admin/src/app/layout.tsx"
      provides: "Google Fonts loaded for magazine typography"
      contains: "Playfair_Display"
    - path: "admin/src/lib/types.ts"
      provides: "DesignSpec TypeScript interface"
      contains: "DesignSpec"
  key_links:
    - from: "admin/src/components/blocks/hero-block.tsx"
      to: "admin/src/components/magazine-image.tsx"
      via: "Uses MagazineImage for hero image"
    - from: "admin/src/components/blocks/body-text-block.tsx"
      to: "admin/src/app/layout.tsx"
      via: "Uses Google Font CSS variables loaded in layout"
---

<objective>
Upgrade all 10 block components from placeholder rendering to magazine-quality output. Add real image rendering (using MagazineImage from Plan 02), magazine typography with Google Fonts, and design spec awareness.

Purpose: This is the visual transformation — blocks go from "Product Photo" placeholders to actual images, and from system fonts to curated editorial typography.
Output: All 10 blocks upgraded with real images, magazine typography, and design spec support.
</objective>

<execution_context>
@/Users/kiyeol/.claude-pers/get-shit-done/workflows/execute-plan.md
@/Users/kiyeol/.claude-pers/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-magazine-renderer-enhancement/11-CONTEXT.md
@.planning/phases/11-magazine-renderer-enhancement/11-RESEARCH.md
@.planning/phases/11-magazine-renderer-enhancement/11-02-SUMMARY.md
@admin/src/components/magazine-image.tsx
@admin/src/components/blocks/hero-block.tsx
@admin/src/components/blocks/product-showcase-block.tsx
@admin/src/components/blocks/celeb-feature-block.tsx
@admin/src/components/blocks/image-gallery-block.tsx
@admin/src/components/blocks/body-text-block.tsx
@admin/src/components/blocks/headline-block.tsx
@admin/src/components/blocks/pull-quote-block.tsx
@admin/src/components/blocks/divider-block.tsx
@admin/src/components/blocks/hashtag-bar-block.tsx
@admin/src/components/blocks/credits-block.tsx
@admin/src/lib/types.ts
@admin/src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Google Fonts setup + DesignSpec types + image blocks upgrade</name>
  <files>
    admin/src/app/layout.tsx
    admin/src/lib/types.ts
    admin/src/components/blocks/hero-block.tsx
    admin/src/components/blocks/product-showcase-block.tsx
    admin/src/components/blocks/celeb-feature-block.tsx
    admin/src/components/blocks/image-gallery-block.tsx
  </files>
  <action>
**Update `admin/src/app/layout.tsx` — load Google Fonts:**

Add next/font/google imports for magazine fonts. These are loaded at build time and applied via CSS variables:

```typescript
import { Playfair_Display, Noto_Serif_KR, Gothic_A1, Noto_Sans_KR } from "next/font/google";

const playfairDisplay = Playfair_Display({
  variable: "--font-playfair",
  subsets: ["latin"],
  display: "swap",
});

const notoSerifKR = Noto_Serif_KR({
  variable: "--font-noto-serif-kr",
  subsets: ["latin"],
  weight: ["400", "700"],
  display: "swap",
});

const gothicA1 = Gothic_A1({
  variable: "--font-gothic-a1",
  subsets: ["latin"],
  weight: ["400", "500", "700"],
  display: "swap",
});

const notoSansKR = Noto_Sans_KR({
  variable: "--font-noto-sans-kr",
  subsets: ["latin"],
  display: "swap",
});
```

Add all font variables to the `<body>` className alongside existing Geist fonts:
```
${playfairDisplay.variable} ${notoSerifKR.variable} ${gothicA1.variable} ${notoSansKR.variable}
```

**Update `admin/src/lib/types.ts` — add DesignSpec interface:**

Add at the end, before the Request types section:

```typescript
// ---------------------------------------------------------------------------
// Design Spec types -- mirrors src/editorial_ai/models/design_spec.py
// ---------------------------------------------------------------------------

export interface FontPairing {
  headline_font: string;
  body_font: string;
  accent_font?: string | null;
}

export interface ColorPalette {
  primary: string;
  secondary: string;
  accent: string;
  background: string;
  text: string;
  muted: string;
}

export interface DesignSpec {
  font_pairing: FontPairing;
  color_palette: ColorPalette;
  layout_density: "compact" | "normal" | "spacious";
  mood: string;
  hero_aspect_ratio: string;
  drop_cap: boolean;
}
```

**Upgrade `admin/src/components/blocks/hero-block.tsx`:**

Replace placeholder with real image rendering. Accept optional `designSpec` prop:

```typescript
import { MagazineImage } from "@/components/magazine-image";
import type { HeroBlock, DesignSpec } from "@/lib/types";

interface HeroBlockProps {
  block: HeroBlock;
  designSpec?: DesignSpec;
}
```

- Use `MagazineImage` with `src={block.image_url}`, `alt={block.overlay_title || "Hero image"}`
- Set `aspectRatio` from `designSpec?.hero_aspect_ratio ?? "16/9"`
- Pass `gradientFrom={designSpec?.color_palette?.primary}` and `gradientTo={designSpec?.color_palette?.accent}` for themed gradient fallback
- Keep the overlay text (title + subtitle) absolutely positioned over the image
- Overlay text should use the headline font: `style={{ fontFamily: "var(--font-playfair), Georgia, serif" }}`
- Hero title: `text-4xl md:text-5xl font-bold text-white drop-shadow-lg`
- Hero subtitle: `text-lg md:text-xl text-white/90 drop-shadow-md`
- Add `priority` prop to MagazineImage for above-the-fold loading

**Upgrade `admin/src/components/blocks/product-showcase-block.tsx`:**

Replace "Product Photo" placeholder with real product images:
- Use `MagazineImage` with `src={product.image_url || ""}`, `alt={product.name}`
- Keep aspect-square container
- Product name: use `font-semibold` instead of `font-bold` for subtler magazine feel
- Brand text: keep as muted secondary text
- Add a subtle hover effect: `group` on card, `group-hover:scale-105 transition-transform duration-300` on image container

**Upgrade `admin/src/components/blocks/celeb-feature-block.tsx`:**

Replace "Photo" circle placeholder with real celeb images:
- Use `MagazineImage` with `src={celeb.image_url || ""}`, `alt={celeb.name}`, `className="rounded-full"`
- Increase circle size from `size-24` to `size-28`
- Name text: `font-semibold text-lg`
- Wrap MagazineImage in a `rounded-full overflow-hidden` container

**Upgrade `admin/src/components/blocks/image-gallery-block.tsx`:**

Replace grey placeholders with real images:
- Use `MagazineImage` with `src={img.url}`, `alt={img.alt || "Gallery image"}`
- Keep existing grid/carousel/masonry layout logic
- Each image: `MagazineImage` with `aspectRatio="1/1"` for grid, `aspectRatio="3/4"` for masonry
- Caption styling: `text-xs text-muted-foreground italic mt-1.5`
  </action>
  <verify>
`cd /Users/kiyeol/development/decoded/editorial-ai-worker/admin && npx tsc --noEmit --pretty 2>&1 | head -30` — no type errors
  </verify>
  <done>Google Fonts loaded, DesignSpec types added, 4 image blocks upgraded to render real images via MagazineImage with design spec theming.</done>
</task>

<task type="auto">
  <name>Task 2: Typography blocks + remaining blocks upgrade</name>
  <files>
    admin/src/components/blocks/body-text-block.tsx
    admin/src/components/blocks/headline-block.tsx
    admin/src/components/blocks/pull-quote-block.tsx
    admin/src/components/blocks/divider-block.tsx
    admin/src/components/blocks/hashtag-bar-block.tsx
    admin/src/components/blocks/credits-block.tsx
  </files>
  <action>
**Upgrade `admin/src/components/blocks/body-text-block.tsx` — magazine typography:**

Accept optional `designSpec` prop. Transform to magazine-quality body text:

1. Font: `style={{ fontFamily: "var(--font-noto-sans-kr), 'Noto Sans KR', sans-serif" }}`
2. Line height: `leading-[1.8]` (Tailwind) for comfortable magazine reading
3. Paragraph spacing: `mb-6` (increase from `mb-4`)
4. Text color: `text-gray-800` (slightly darker for better contrast)
5. Text size: `text-[17px]` (slightly larger than default for magazine feel)
6. **Drop cap** on first paragraph only (when `designSpec?.drop_cap !== false`):
   - Extract first character, render it in a separate `<span>`
   - Drop cap styling: `float-left text-[3.5rem] leading-[0.8] mr-3 mt-1 font-bold` with serif font (`font-family: var(--font-playfair), Georgia, serif`)
   - Color: use `designSpec?.color_palette?.primary ?? "#1a1a2e"` for the drop cap
   - Only apply drop cap if paragraph has content

**Upgrade `admin/src/components/blocks/headline-block.tsx` — magazine typography:**

Accept optional `designSpec` prop:
- Font family: `style={{ fontFamily: "var(--font-playfair), Georgia, serif" }}` (keep serif but use loaded Google Font)
- Level 1: `text-4xl md:text-5xl font-bold tracking-tight leading-tight`
- Level 2: `text-3xl md:text-4xl font-semibold tracking-tight leading-snug`
- Level 3: `text-2xl md:text-3xl font-medium tracking-normal`
- Add a subtle bottom accent line for level 1 headlines: a 48px wide, 3px tall bar in accent color below the text

**Upgrade `admin/src/components/blocks/pull-quote-block.tsx` — editorial styling:**

Accept optional `designSpec` prop:
- Quote text: `text-2xl md:text-3xl` (larger), font stays Georgia serif
- Border left: use accent color from design spec if available: `style={{ borderColor: designSpec?.color_palette?.accent ?? "hsl(var(--primary))" }}`
- Border width: increase to `border-l-[3px]`
- Attribution: `text-sm tracking-wide uppercase text-muted-foreground`
- Add opening/closing quotation marks as decorative elements (using `before:content-['"']` pseudo-element or literal characters)

**Upgrade `admin/src/components/blocks/divider-block.tsx` — subtle refinements:**

Accept optional `designSpec` prop:
- Line style: use a thinner, more elegant line (`border-t border-gray-200`)
- Space style: increase to `h-12` for more breathing room
- Ornament style: replace `***` with a more elegant ornament — use centered dot pattern: `· · ·` with `text-lg tracking-[1em] text-gray-300`

**Upgrade `admin/src/components/blocks/hashtag-bar-block.tsx` — editorial styling:**

Accept optional `designSpec` prop:
- Tags: `text-xs font-medium tracking-wide uppercase`
- Background: use `bg-gray-50 hover:bg-gray-100 transition-colors`
- Border: add `border border-gray-200`
- Rounded: keep `rounded-full`
- Padding: `px-4 py-1.5`

**Upgrade `admin/src/components/blocks/credits-block.tsx` — editorial styling:**

Accept optional `designSpec` prop:
- Wrap in a top border: `border-t pt-6 mt-4`
- Role labels: `text-[10px] uppercase tracking-[0.15em] text-gray-400 font-medium`
- Names: `text-sm text-gray-600`
- Add "Credits" header: small, uppercase, tracked, muted
  </action>
  <verify>
`cd /Users/kiyeol/development/decoded/editorial-ai-worker/admin && npx tsc --noEmit --pretty 2>&1 | head -30` — no type errors
  </verify>
  <done>All 6 non-image blocks upgraded with magazine typography. Drop cap on first body text paragraph. Headline with accent bar. Pull quote with decorative marks. Elegant dividers, hashtags, and credits.</done>
</task>

</tasks>

<verification>
1. Type check: `cd admin && npx tsc --noEmit` passes
2. Build check: `cd admin && npm run build` passes
3. All 10 blocks accept optional `designSpec` prop
4. Hero/product/celeb/gallery blocks use MagazineImage for real image rendering
5. Body text has drop cap, serif/sans-serif mix, line-height 1.8
6. Headline uses Playfair Display (or fallback Georgia)
7. Google Fonts CSS variables available in all components
</verification>

<success_criteria>
- All 4 image blocks render real images via MagazineImage (no more placeholders)
- Body text has magazine typography with drop cap, proper line height, and readable fonts
- Headlines use serif Google Fonts
- All blocks accept optional designSpec for dynamic theming
- No TypeScript compilation or build errors
</success_criteria>

<output>
After completion, create `.planning/phases/11-magazine-renderer-enhancement/11-03-SUMMARY.md`
</output>
